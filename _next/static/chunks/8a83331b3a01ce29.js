(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15791,(o,e,n)=>{var i,t,r,s,c;i=window,t=function(){for(var o=arguments[0],e=[].slice.call(arguments,1),n=0;n<e.length;++n){var i=e[n];for(let e in i){var r=i[e];o[e]="object"==typeof r?t("object"==typeof o[e]?o[e]:{},r):r}}return o},r={wav:"WebAudioRecorderWav.min.js",ogg:"WebAudioRecorderOgg.min.js",mp3:"WebAudioRecorderMp3.min.js"},s={workerDir:"/",numChannels:2,encoding:"wav",options:{timeLimit:300,encodeAfterRecord:!1,progressInterval:1e3,bufferSize:void 0,wav:{mimeType:"audio/wav"},ogg:{mimeType:"audio/ogg",quality:.5},mp3:{mimeType:"audio/mpeg",bitRate:160}}},c=function(o,e){t(this,s,e||{}),this.context=o.context,null==this.context.createScriptProcessor&&(this.context.createScriptProcessor=this.context.createJavaScriptNode),this.input=this.context.createGain(),o.connect(this.input),this.buffer=[],this.initWorker()},t(c.prototype,{isRecording:function(){return null!=this.processor},setEncoding:function(o){this.isRecording()?this.error("setEncoding: cannot set encoding during recording"):this.encoding!==o&&(this.encoding=o,this.initWorker())},setOptions:function(o){this.isRecording()?this.error("setOptions: cannot set options during recording"):(t(this.options,o),this.worker.postMessage({command:"options",options:this.options}))},startRecording:function(){if(this.isRecording())this.error("startRecording: previous recording is running");else{var o=this.numChannels,e=this.buffer,n=this.worker;this.processor=this.context.createScriptProcessor(this.options.bufferSize,this.numChannels,this.numChannels),this.input.connect(this.processor),this.processor.connect(this.context.destination),this.processor.onaudioprocess=function(i){for(var t=0;t<o;++t)e[t]=i.inputBuffer.getChannelData(t);n.postMessage({command:"record",buffer:e})},this.worker.postMessage({command:"start",bufferSize:this.processor.bufferSize}),this.startTime=Date.now()}},recordingTime:function(){return this.isRecording()?(Date.now()-this.startTime)*.001:null},cancelRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"cancel"})):this.error("cancelRecording: no recording is running")},finishRecording:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"finish"})):this.error("finishRecording: no recording is running")},cancelEncoding:function(){this.options.encodeAfterRecord?this.isRecording()?this.error("cancelEncoding: recording is not finished"):(this.onEncodingCanceled(this),this.initWorker()):this.error("cancelEncoding: invalid method call")},initWorker:function(){null!=this.worker&&this.worker.terminate(),this.onEncoderLoading(this,this.encoding),this.worker=new Worker(this.workerDir+r[this.encoding]);var o=this;this.worker.onmessage=function(e){var n=e.data;switch(n.command){case"loaded":o.onEncoderLoaded(o,o.encoding);break;case"timeout":o.onTimeout(o);break;case"progress":o.onEncodingProgress(o,n.progress);break;case"complete":o.onComplete(o,n.blob);break;case"error":o.error(n.message)}},this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.numChannels},options:this.options})},error:function(o){this.onError(this,"WebAudioRecorder.js:"+o)},onEncoderLoading:function(o,e){},onEncoderLoaded:function(o,e){},onTimeout:function(o){o.finishRecording()},onEncodingProgress:function(o,e){},onEncodingCanceled:function(o){},onComplete:function(o,e){o.onError(o,"WebAudioRecorder.js: You must override .onComplete event")},onError:function(o,e){console.log(e)}}),i.WebAudioRecorder=c}]);